(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d218436"],{c9f0:function(e,t,l){"use strict";l.r(t);l("b0c0");var o=l("7a23"),n=Object(o["createTextVNode"])("取消"),r=Object(o["createTextVNode"])("保存并下一步"),c=Object(o["createVNode"])("i",{class:"el-icon-plus"},null,-1);function a(e,t,l,a,u,i){var d=Object(o["resolveComponent"])("el-button"),s=Object(o["resolveComponent"])("el-step"),b=Object(o["resolveComponent"])("el-steps"),f=Object(o["resolveComponent"])("el-input"),p=Object(o["resolveComponent"])("el-form-item"),j=Object(o["resolveComponent"])("el-cascader"),O=Object(o["resolveComponent"])("el-col"),m=Object(o["resolveComponent"])("el-option"),v=Object(o["resolveComponent"])("el-select"),h=Object(o["resolveComponent"])("el-row"),V=Object(o["resolveComponent"])("el-upload"),C=Object(o["resolveComponent"])("el-input-number"),w=Object(o["resolveComponent"])("el-form"),x=Object(o["resolveComponent"])("el-dialog");return Object(o["openBlock"])(),Object(o["createBlock"])(x,{"close-on-click-modal":!1,"close-on-press-escape":!1,title:"编辑",width:"800px","model-value":e.visible,onClose:e.onCancel},{footer:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{key:"back",onClick:t[1]||(t[1]=function(){return e.onCancel()})},{default:Object(o["withCtx"])((function(){return[n]})),_:1}),Object(o["createVNode"])(d,{key:"submit",type:"primary",loading:e.onSubmitLoading,onClick:e.onFinish},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["loading","onClick"])]})),default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{active:1,"process-status":"wait","align-center":"",style:{"margin-bottom":"40px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{title:"填写课程基本信息"}),Object(o["createVNode"])(s,{title:"完善课程详情"}),Object(o["createVNode"])(s,{title:"创建课程大纲"}),Object(o["createVNode"])(s,{title:"提交审核"})]})),_:1}),Object(o["createVNode"])(w,{model:e.modelRef,rules:e.rulesRef,ref:"formRef","label-width":"80px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"长标题",prop:"title"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:e.modelRef.title,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modelRef.title=t}),placeholder:"课程长标题"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,{label:"短标题",prop:"shortTitle"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{modelValue:e.modelRef.shortTitle,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.modelRef.shortTitle=t}),placeholder:"课程短标题"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"课程分类",prop:"subjectId"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{onChange:e.selectParentChange,"change-on-select":!0,options:e.subjectTreeData,filterable:"",style:{width:"100%"},props:{expandTrigger:"hover",value:"id",label:"name",children:"children"},modelValue:e.pKeys,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.pKeys=t})},null,8,["onChange","options","modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"课程类型"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{modelValue:e.modelRef.courseType,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.modelRef.courseType=t}),placeholder:"请选择课程类型"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.courseTypeOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"选择讲师",prop:"teacherId"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{modelValue:e.modelRef.teacherId,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.modelRef.teacherId=t}),placeholder:"请选择讲师"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.teachers,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"课程难易"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{modelValue:e.modelRef.difficulty,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modelRef.difficulty=t}),placeholder:"请选择课程难易"},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.difficultyOptions,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{label:"课程封面",prop:"cover"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(V,{headers:{Authorization:e.headerToken},action:e.uploadApi,class:{disabled:e.uploadDisabled},"list-type":"picture-card",limit:1,"on-change":e.handleChange,"on-remove":e.handleRemove,accept:"image/*","on-success":e.handleSuccess,ref:"upload","on-preview":e.handlePictureCardPreview,"file-list":e.imgFilesList},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["headers","action","class","on-change","on-remove","on-success","on-preview","file-list"])]})),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"价格",prop:"sort"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{modelValue:e.modelRef.price,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.modelRef.price=t}),min:0,max:500,label:"价格"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(o["createVNode"])(O,{span:12},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"课时",prop:"sort"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(C,{modelValue:e.modelRef.lessonNum,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.modelRef.lessonNum=t}),min:1,max:1e3,label:"课时"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{label:"课程描述"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{type:"textarea",modelValue:e.modelRef.courseDesc,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.modelRef.courseDesc=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["model-value","onClose"])}l("d3b7"),l("ddb0"),l("96cf");var u=l("1da1"),i=l("47e2"),d=l("3fd4"),s=Object(o["defineComponent"])({name:"UpdateForm",props:{headerToken:{type:String,required:!0},subjectTreeData:{type:Object,required:!0},teachers:{type:Array,required:!0},visible:{type:Boolean,required:!0},values:{type:Object,required:!0},onCancel:{type:Function,required:!0},onSubmitLoading:{type:Boolean,required:!0},onSubmit:{type:Function,required:!0}},components:{},setup:function(e){var t=Object(i["b"])(),l=t.t,n=Object(o["ref"])([]),r=Object(o["ref"])([{value:0,label:"入门"},{value:1,label:"初级"},{value:2,label:"中级"},{value:3,label:"高级"}]),c=Object(o["ref"])([{value:0,label:"新手入门"},{value:1,label:"免费好课"},{value:2,label:"技能提高"},{value:3,label:"实战开发"}]),a=Object(o["ref"])([]);a.value.push({url:e.values.cover,name:e.values.title,id:e.values.id});var s=Object(o["reactive"])({id:e.values.id||0,title:e.values.title||"",shortTitle:e.values.shortTitle||"",courseType:e.values.courseType||0,difficulty:e.values.difficulty||0,price:e.values.price||0,lessonNum:e.values.lessonNum||0,cover:e.values.cover||"",teacherId:e.values.teacherId||0,subjectId:e.values.subjectId||0,remarks:e.values.remarks||"",courseDesc:e.values.courseDesc||""});n.value=[e.values.subjectParentId,e.values.subjectId];var b=Object(o["reactive"])({id:[],name:[{required:!0,validator:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,l){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==l&&l){e.next=4;break}throw new Error("请输入名称");case 4:if(!(l.length>15)){e.next=6;break}throw new Error("长度不能大于15个字");case 6:case"end":return e.stop()}}),e)})));function t(t,l){return e.apply(this,arguments)}return t}()}],remarks:[]}),f=Object(o["ref"])(),p=function(){var e;null===(e=f.value)||void 0===e||e.resetFields()},j=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null===(o=f.value)||void 0===o?void 0:o.validate();case 3:n=t.sent,!0===n&&e.onSubmit(s,p),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),d["a"].warning(l("app.global.form.validatefields.catch"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),O=function(e,t,l){s.cover=e.data.urlPath};return{modelRef:s,rulesRef:b,formRef:f,resetFields:p,onFinish:j,handleSuccess:O,pKeys:n,difficultyOptions:r,courseTypeOptions:c,imgFilesList:a,uploadApi:"http://gateway:7000/edu/oss/upload"}}});s.render=a;t["default"]=s}}]);