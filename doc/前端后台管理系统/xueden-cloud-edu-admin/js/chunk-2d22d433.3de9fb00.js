(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d433"],{f76b:function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),o=Object(n["createTextVNode"])("取消"),l=Object(n["createTextVNode"])("保存并下一步"),c=Object(n["createVNode"])("i",{class:"el-icon-plus"},null,-1);function a(e,t,r,a,u,i){var d=Object(n["resolveComponent"])("el-button"),b=Object(n["resolveComponent"])("el-step"),s=Object(n["resolveComponent"])("el-steps"),f=Object(n["resolveComponent"])("el-input"),p=Object(n["resolveComponent"])("el-form-item"),j=Object(n["resolveComponent"])("el-cascader"),m=Object(n["resolveComponent"])("el-col"),O=Object(n["resolveComponent"])("el-option"),h=Object(n["resolveComponent"])("el-select"),V=Object(n["resolveComponent"])("el-row"),v=Object(n["resolveComponent"])("el-upload"),w=Object(n["resolveComponent"])("el-input-number"),C=Object(n["resolveComponent"])("el-form"),N=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(N,{"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.onCancel,title:"新增",width:"800px","model-value":e.visible,onClose:e.onCancel},{footer:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{key:"back",onClick:t[1]||(t[1]=function(){return e.onCancel()})},{default:Object(n["withCtx"])((function(){return[o]})),_:1}),Object(n["createVNode"])(d,{key:"submit",type:"primary",loading:e.onSubmitLoading,onClick:e.onFinish},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["loading","onClick"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{active:1,"process-status":"wait","align-center":"",style:{"margin-bottom":"40px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{title:"填写课程基本信息"}),Object(n["createVNode"])(b,{title:"完善课程详情"}),Object(n["createVNode"])(b,{title:"创建课程大纲"}),Object(n["createVNode"])(b,{title:"提交审核"})]})),_:1}),Object(n["createVNode"])(C,{model:e.modelRef,rules:e.rulesRef,ref:"formRef","label-width":"80px"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"长标题",prop:"title"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{modelValue:e.modelRef.title,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.modelRef.title=t}),placeholder:"课程长标题"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(p,{label:"短标题",prop:"shortTitle"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{modelValue:e.modelRef.shortTitle,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.modelRef.shortTitle=t}),placeholder:"课程短标题"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(V,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"课程分类",prop:"subjectId"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{onChange:e.selectParentChange,"change-on-select":!0,options:e.subjectTreeData,filterable:"",style:{width:"100%"},props:{expandTrigger:"hover",value:"id",label:"name",children:"children"},modelValue:e.pKeys,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.pKeys=t})},null,8,["onChange","options","modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"课程类型"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:e.modelRef.courseType,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.modelRef.courseType=t}),placeholder:"请选择课程类型"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{label:"新手入门",value:"0"}),Object(n["createVNode"])(O,{label:"免费好课",value:"1"}),Object(n["createVNode"])(O,{label:"技能提高",value:"2"}),Object(n["createVNode"])(O,{label:"实战开发",value:"3"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(V,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"选择讲师"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:e.modelRef.teacherId,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.modelRef.teacherId=t}),placeholder:"请选择讲师"},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.teachers,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"课程难度"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:e.modelRef.difficulty,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.modelRef.difficulty=t}),placeholder:"请选择课程难度"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{label:"入门",value:"0"}),Object(n["createVNode"])(O,{label:"初级",value:"1"}),Object(n["createVNode"])(O,{label:"中级",value:"2"}),Object(n["createVNode"])(O,{label:"高级",value:"3"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(p,{label:"课程封面",prop:"cover"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(v,{headers:{Authorization:e.headerToken},action:e.uploadApi,class:{disabled:e.uploadDisabled},"list-type":"picture-card",limit:e.limitcount,"on-change":e.handleChange,"on-remove":e.handleRemove,accept:"image/*","on-success":e.handleSuccess,ref:"upload","on-preview":e.handlePictureCardPreview},{default:Object(n["withCtx"])((function(){return[c]})),_:1},8,["headers","action","class","limit","on-change","on-remove","on-success","on-preview"])]})),_:1}),Object(n["createVNode"])(V,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"价格",prop:"sort"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{modelValue:e.modelRef.price,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.modelRef.price=t}),min:0,max:500,label:"价格"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(m,{span:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"课时",prop:"sort"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{modelValue:e.modelRef.lessonNum,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.modelRef.lessonNum=t}),min:1,max:1e3,label:"课时"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(p,{label:"课程描述"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{type:"textarea",modelValue:e.modelRef.courseDesc,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.modelRef.courseDesc=t})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["before-close","model-value","onClose"])}r("96cf");var u=r("1da1"),i=r("47e2"),d=r("3fd4"),b=Object(n["defineComponent"])({name:"CreateForm",props:{headerToken:{type:String,required:!0},subjectTreeData:{type:Object,required:!0},teachers:{type:Array,required:!0},visible:{type:Boolean,required:!0},onCancel:{type:Function,required:!0},onSubmitLoading:{type:Boolean,required:!0},onSubmit:{type:Function,required:!0}},components:{},setup:function(e){var t=Object(i["b"])(),r=t.t,o=Object(n["ref"])([]),l=Object(n["reactive"])({title:"",shortTitle:"",price:0,lessonNum:0}),c=Object(n["reactive"])({title:[{required:!0,validator:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==r&&r){e.next=4;break}throw new Error("请输入名称");case 4:if(!(r.length>105)){e.next=6;break}throw new Error("长度不能大于105个字");case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}],shortTitle:[{required:!0,validator:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==r&&r){e.next=4;break}throw new Error("请输入名称");case 4:if(!(r.length>35)){e.next=6;break}throw new Error("长度不能大于35个字");case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}],teacherId:[{required:!0}],subjectId:[{required:!0}],courseType:[{required:!0}],difficulty:[{required:!0}],lessonNum:[{required:!0}],price:[{required:!0}]}),a=Object(n["ref"])(),b=function(){var e;null===(e=a.value)||void 0===e||e.resetFields()},s=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null===(n=a.value)||void 0===n?void 0:n.validate();case 3:o=t.sent,!0===o&&e.onSubmit(l,b),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),d["a"].warning(r("app.global.form.validatefields.catch"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),f=function(){var e=o.value.length;e>0?(l.subjectParentId=o.value[0],l.subjectId=o.value[e-1]):(l.subjectId=0,l.subjectParentId=0)},p=function(e,t,r){l.cover=e.data.urlPath};return{modelRef:l,rulesRef:c,formRef:a,resetFields:b,onFinish:s,selectParentChange:f,handleSuccess:p,pKeys:o,uploadApi:"http://gateway:7000/edu/oss/upload"}}});b.render=a;t["default"]=b}}]);